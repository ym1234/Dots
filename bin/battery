#!/bin/bash
while : ; do
	acpi -b | awk -F'[,:%]' '{print $2, $3}' | {
		read -r status capacity

		[[ "$status" == "Discharging" ]] && {
			[[ "$capacity" -lt 5 ]] && {
				dunstify -r 220 -u critical -a "Battery" "$capacity%, suspending in 5 seconds."
				sleep 5
				systemctl suspend
			}
			[[ "$capacity" -lt 15 ]] && [[ "$capacity" -gt 5 ]] &&  battery_level critical
		} || {
			[[ "$status" == "Full" ]] && battery_level
		}
	}
	sleep 1m
done
